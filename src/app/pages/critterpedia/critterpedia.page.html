<app-cool-header title="Critterpedia" [color]="utils.getCssVarValue('--ion-color-critterpedia')"></app-cool-header>

<ion-content>
  <ion-segment mode="ios" scrollable (ionChange)="segmentChanged($event)" [value]="activeSegment" [disabled]="isSearching">
    <ion-segment-button value="bugs">
      <ion-label>Bugs</ion-label>
    </ion-segment-button>
    <ion-segment-button value="fishes">
      <ion-label>Fish</ion-label>
    </ion-segment-button>
    <ion-segment-button value="sea-creatures">
      <ion-label>Sea Creatures</ion-label>
    </ion-segment-button>
    <ion-segment-button value="fossils">
      <ion-label>Fossils</ion-label>
    </ion-segment-button>
  </ion-segment>

  <ion-searchbar animated mode="ios" [(ngModel)]="searchFilter" (ionChange)="applySearchFilter()"></ion-searchbar>

  <div class="segments" *ngIf="!isSearching">
    <div class="segment" *ngIf="activeSegment === 'bugs'">
      <div class="empty-state" *ngIf="!finishedImportingBugs">
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
        The Bugs are still being imported by Pocket Companion! Just wait a bit longer.
      </div>
      <app-critters-list [items]="bugs"></app-critters-list>
    </div>

    <div class="segment" *ngIf="activeSegment === 'fishes'">
      <div class="empty-state" *ngIf="!finishedImportingFishes">
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
        The Fishes are still being imported by Pocket Companion! Just wait a bit longer.
      </div>
      <app-critters-list [items]="fishes"></app-critters-list>
    </div>

    <div class="segment" *ngIf="activeSegment === 'sea-creatures'">
      <div class="empty-state" *ngIf="!finishedImportingSeaCreatures">
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
        The Sea Creatures are still being imported by Pocket Companion! Just wait a bit longer.
      </div>
      <app-critters-list [items]="seaCreatures"></app-critters-list>
    </div>

    <div class="segment" *ngIf="activeSegment === 'fossils'">
      <div class="empty-state" *ngIf="!finishedImportingFossils">
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
        The Fossils are still being imported by Pocket Companion! Just wait a bit longer.
      </div>
      <app-critters-list [items]="fossils"></app-critters-list>
    </div>
  </div>

  <div class="search-results" *ngIf="isSearching">
    <app-critters-list [items]="searchResults"></app-critters-list>
  </div>
</ion-content>
